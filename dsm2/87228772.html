<!DOCTYPE html>
<html>
    <head>
        <title>DSM2 version 8.2 : Tutorial 4: Time Varying Data</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DSM2 version 8.2</a></span>
                            </li>
                                                    <li>
                                <span><a href="DSM2_87228545.html">DSM2</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_87228717.html">Tutorials</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DSM2 version 8.2 : Tutorial 4: Time Varying Data
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicky Sandhu</span> on Jan 27, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><strong>Task</strong><br/>Convert the boundary conditions and gate operations from constants to time varying input data.<span> </span><br class="atl-forced-newline"/><strong>Skills Gained</strong></p><ul><li>Learn about HEC-DSS as a time series data storage system</li><li>Learn how HEC-DSS path names are used to reference time series in DSM2 input files<span> </span><br class="atl-forced-newline"/>The purpose of this tutorial is to incorporate time-varying information into the model. In the previous sections, all boundary conditions and gate timings were set as constant, and no input files were needed. In this section, the model is set to read time-varying information stored in HEC-DSS files.<span> </span><br class="atl-forced-newline"/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="53" width="69" src="attachments/5931256/5931255.png" data-image-src="http://msb-confluence/download/attachments/5931256/worddav00147407c8837037ad26cf9c606f8f1f.png?version=1&amp;modificationDate=1496695532687&amp;api=v2"></span></span><span> </span>The U.S. Army Corps of Engineers' Hydrologic Engineering Center Data Storage System, or HEC-DSS, is a database system designed to efficiently store and retrieve scientific data that is typically sequential. Such data types include, but are not limited to, time series data, curve data, spatial-oriented gridded data, and others. The system was designed to make it easy for users and application programs to retrieve and store data.<span> </span><br/>Data in HEC-DSS format can be viewed using special software including VISTA (DWR), or HEC-DSSVue. Each time series is described in the database using DSS Pathnames (see column headings in figure). For DSM2 the pathnames are typically used as follows:<br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="144" width="433" src="attachments/5931256/5931257.png" data-image-src="http://msb-confluence/download/attachments/5931256/worddavd3c47550a5acba791ade46d63cc8e9ec.png?version=1&amp;modificationDate=1496695532896&amp;api=v2"></span></span><br/>A-Part: Data Source<br/>B-Part: Location<br/>C-Part: Variable<br/>D-Part: Date range<br/>E-Part: Data frequency<span> </span><br/>F-Part: Description (in the sample shown the F-Part is the CalSim run identifier.<br/>For more information see the HEC-DSS website:<span> </span><a href="http://www.hec.usace.army.mil/software/hec-dss/hecdss-dss.html" rel="nofollow" style="text-decoration: none;" class="external-link">http://www.hec.usace.army.mil/software/hec-dss/hecdss-dss.html</a><span> </span><br class="atl-forced-newline"/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="386" width="603" src="attachments/5931256/5931258.png" data-image-src="http://msb-confluence/download/attachments/5931256/worddavd56eb5f63f4c9181cb2a8632c8c6c562.png?version=1&amp;modificationDate=1496695533005&amp;api=v2"></span></span><strong>dummy_res</strong><br/><strong>Figure 1:</strong><span> </span><strong>Simple channel with a reservoir, gate, flow transfer and dummy reservoir.</strong><span> </span><br class="atl-forced-newline"/><br class="atl-forced-newline"/></li></ul><ol><li><strong>Change the Transfer Flows to HEC-DSS input:</strong></li></ol><p>The constant transfer flow from the previous tutorials will be changed to a time series.</p><ol><li><ol><li>Create a new file in Notepad++ or another text editor called input_hydro_ts_tutorial.inp</li><li>In the new file, create the<span> </span><em>TRANSFER_TIME_SERIES</em><span> </span><em>table</em>:</li></ol></li></ol><p>INPUT_TRANSFER_FLOW<br/>TRANSFER_NAME FILLIN FILE PATH<br/>END</p><ol><li><ol><li>Enter the following values into the appropriate fields:<ol><li><ol><li>Input Name:<span> </span><em>transfer_1</em></li><li>Fillin:<span> </span><em>linear</em></li><li>Input File:<span> </span><em>${TUTORIALINPUT}</em></li><li>Path/Value:<span> </span><em>/TUTORIAL/TRANSFER/FLOW//15MIN/CONSTANT/</em></li></ol></li></ol></li></ol></li></ol><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931256/5931259.png" data-image-src="http://msb-confluence/download/attachments/5931256/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695533038&amp;api=v2"></span></span><span> </span>The HEC-DSS pathnames are referred to using forward slashes<br/>/A-Part/B-Part/C-Part/D-Part/E-Part/F-Part/<br/>In the example above, the A-Part is Tutorial, the B-Part is TRANSFER, etc. and the D-Part isn't specified.<span> </span></p><ol><li><ol><li>Open hydro.inp. The input file uses an ENVVAR reference as the filename, so add the definition of TUTORIALINPUT. At the same time, set DSM2MODIFIER to timevar_1:</li></ol></li></ol><p>ENVVAR<br/>NAME VALUE<span> </span><br/>HYDROOUTDSSFILE output.dss<span> </span><br/>DSM2MODIFIER timevar_1<span> </span><br/>TUTORIALINPUT ../timeseries/tutorial.dss<span> </span><br/>END<span> </span></p><ol><li><ol><li>We are going to replace the existing time series with the new file, so make sure it is listed below the other files as follows.</li></ol></li></ol><p>HYDRO_TIME_SERIES<br/>input_boundary_hydro_tutorial.inp<br/>input_transfer_flow_tutorial.inp<br/>input_hydro_ts_tutorial.inp<br/>END</p><ol><li><ol><li>Save the files.</li><li>Open qual.inp and set DSM2MODIFIER to timevar_1 as well (hydro.inp and qual.inp must agree or the tidefile won't be found).</li></ol></li></ol><p><br/></p><ol><li><strong>Running HYDRO and QUAL</strong><ol><li>In Windows Explorer, navigate to the directory: _<br class="atl-forced-newline"/><span class="error" style="color: rgb(51,51,51);">Unknown macro: {DSM2_home}tutorialsimple{_}</span><p>.</p><ol><li><ol><li>Right-click on the directory,<span> </span><em>t4_timevar</em>, and select<span> </span><em>Open Command Window Here</em>.</li><li>In the command window, type:<span> </span><em>hydro hydro.inp</em>. Examine timebar_1_hydro_echo.inp. Did the time series assignment get used?</li><li>In the command window, type:<span> </span><em>qual qual.inp</em>.</li><li>Open the<span> </span><em>output.dss</em><span> </span>file in the<span> </span><em>t4_timevar</em><span> </span>directory, and verify that the results are identical to the results from the previous tutorial (located in the<span> </span><em>t3_layering</em><span> </span>directory). Why is this?</li></ol></li></ol><p><br class="atl-forced-newline"/><strong>Adjust DSM2MODIFIER to represent a variant scenario:</strong></p><ol><li><ol><li>In Windows Explorer, navigate to the directory:<span> </span><em>\\{DSM2_home}\tutorial\simple\t4_timevar</em></li><li>Open<span> </span><em>hydro.inp</em><span> </span>for editing.</li><li>In the<span> </span><em>ENVVAR</em><span> </span>section, change the<span> </span><em>DSM2MODIFIER</em><span> </span>environment variable from<span> </span><em>timevar_1</em><span> </span>to<span> </span><em>timevar_2</em>.</li><li>Open<span> </span><em>qual.inp</em><span> </span>for editing.</li><li>In the<span> </span><em>ENVVAR</em><span> </span>section, change the<span> </span><em>DSM2MODIFIER</em><span> </span>environment variable from<span> </span><em>timevar_1</em><span> </span>to<span> </span><em>timevar_2</em>.</li></ol></li></ol><p><br/></p><ol><li><strong>Add Source information into HYDRO:</strong><ol><li>In<span> </span><em>input_hydro_ts_tutorial.inp</em>, create the table for node sources:</li></ol></li></ol><p>SOURCE_FLOW<br/>NAME NODE SIGN FILLIN FILE PATH<br/>END</p><ol><li><ol><li>Enter the following values into the appropriate fields:<ol><li><ol><li>Name:<span> </span><em>source1</em></li><li>Node:<span> </span><em>5</em></li><li>Input File:<span> </span><em>${TUTORIALINPUT}</em></li><li>Path/Value:<span> </span><em>/TUTORIAL/SOURCE/FLOW//15MIN/CONSTANT/</em></li><li>Sign:<span> </span><em>1</em></li><li>Fillin:<span> </span><em>linear</em></li></ol></li></ol></li><li>Save the current settings.</li></ol></li></ol><p><br/></p><ol><li><strong>Add Corresponding Source information into QUAL:</strong><ol><li>Create a file called<span> </span><em>input_qual_ts_tutorial.inp</em>.<ol><li>In input_qual_ts_tutorial.inp, create the NODE_CONCENTRATION table</li></ol></li></ol></li></ol><p>NODE_CONCENTRATION<br/>NAME NODE_NO VARIABLE FILLIN FILE PATH<br/>END<span> </span></p><ol><li><ol><li><ol><li>Enter the following values into the appropriate fields:<ol><li>Input Name:<span> </span><em>source1</em></li><li>Node:<span> </span><em>5</em></li><li>Variable:<span> </span><em>ec</em></li><li>Input File:<span> </span><em>${TUTORIALINPUT}</em></li><li>Path/Value:<span> </span><em>/TUTORIAL/SOURCE/EC//15MIN/CONSTANT/</em></li><li>Fillin:<span> </span><em>last</em></li></ol></li><li>Add the ENVVAR definition for TUTORIALINPUT in qual.inp</li></ol></li></ol></li></ol><p>TUTORIALINPUT ../timeseries/tutorial.dss</p><ol><li><ol><li>In qual.inp, make sure that the file gets used:</li></ol></li></ol><p>QUAL_TIME_SERIES<br/>input_node_conc_tutorial.inp<br/>input_qual_ts_tutorial.inp<br/>END<span> </span></p><ol><li><strong>Add Time-varying Tide Information for Downstream Boundary in HYDRO:</strong><ol><li><ol><li>Reopen<span> i</span><em>nput_hydro_ts_tutorial.inp</em></li><li>Create the<span> </span><em>BOUNDARY_STAGE</em><span> </span>table.</li></ol></li></ol></li></ol><p><br class="atl-forced-newline"/>BOUNDARY_STAGE<br/>NAME NODE FILLIN FILE PATH<br/>END</p><ol><li><ol><li><ol><li>In the<span> </span><em>Boundary Stage</em><span> </span><em>table</em><span> </span>enter the following values into the appropriate fields:<ol><li>Input Name:<span> </span><em>downstream_stage</em></li><li>Node:<span> </span><em>7</em></li><li>Input File:<span> </span><em>${TUTORIALINPUT}</em></li><li>Path/Value:<span> </span><em>/TUTORIAL/DOWNSTREAM/STAGE//15MIN/REALISTIC/</em></li><li>Fillin:<span> </span><em>linear</em></li></ol></li></ol></li></ol></li><li><strong>Add Downstream Boundary in QUAL:</strong><ol><li>Re-open<span> </span><em>input_qual_ts_tutorial.inp</em>.</li><li>In the<span> </span><em>Node Concentration</em><span> </span><em>table</em>:<ol><li>Enter the following values into the appropriate fields:<ol><li>Input Name:<span> </span><em>downstream_stage</em></li><li>Node:<span> </span><em>7</em></li><li><em>Variable: ec</em></li><li>Input File:<span> </span><em>${TUTORIALINPUT}</em></li><li>Path/Value:<span> </span><em>/TUTORIAL/DOWNSTREAM/EC//15MIN/REALISTIC/</em></li><li>Fillin:<span> </span><em>last</em></li></ol></li></ol></li></ol></li></ol><p><br/></p><ol><li><strong>Add a Gate Time Series to HYDRO:</strong></li></ol><p>This gate time series will control the weir. The pipe is to be left open all the time (its default).</p><ol><li><ol><li>Create a file for the gate input called<span> </span><em>input</em><span> </span>gate_tutorial.inp_</li><li>Create the<span> </span><em>gate time series table</em><span> </span>INPUT_GATE:</li><li>In the table enter the following values into the appropriate fields:<ol><li><ol><li>Gate:<span> </span><em>gate_1</em></li><li>Device:<span> </span><em>weir</em></li><li>Variable:<span> </span><em>op_from_node</em></li><li>Input File:<span> </span><em>${TUTORIALINPUT}</em></li><li>Path/Value:<span> </span><em>/TUTORIAL/GATE/FLAP_OP//IR-YEAR/TIMEVAR/</em></li><li>Fillin:<span> </span><em>none</em><span> </span>(Can you tell why fillin is &quot;none&quot; for this time series?)</li></ol></li></ol></li><li>Add the include file to hydro.inp. The time series block should look as follows:</li></ol></li></ol><p>HYDRO_TIME_SERIES<br/>input_boundary_hydro_tutorial.inp<br/>input_transfer_flow_tutorial.inp<br/>input_hydro_ts_tutorial.inp<br/>input_gate_tutorial.inp<br/>END</p><ol><li><ol><li>Save the current settings.</li></ol></li></ol><p><strong>Running HYDRO and QUAL</strong></p><ol><li><ol><li>In Windows Explorer, navigate to the directory: _</li></ol></li></ol>.</li><li>Right-click on the directory,<span> </span><em>t4_timevar</em>, and select<span> </span><em>Open Command Window Here</em>.</li><li>In the command window, type:<span> </span><em>hydro hydro.inp</em>.</li><li>In the command window, type:<span> </span><em>qual qual.inp</em>.</li><li>Open the<span> </span><em>output.dss</em><span> </span>file in the<span> </span><em>t4_timevar</em><span> </span>directory, and examine the results.</li></ol></li></ol>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228772/87228771.png">worddave8e1df4e853bb46c4ee6f68afece040d.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228772/87228773.png">worddavd56eb5f63f4c9181cb2a8632c8c6c562.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228772/87228774.png">worddavd3c47550a5acba791ade46d63cc8e9ec.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228772/87228775.png">worddav00147407c8837037ad26cf9c606f8f1f.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 16, 2023 11:04</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
