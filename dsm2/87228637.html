<!DOCTYPE html>
<html>
    <head>
        <title>DSM2 version 8.2 : PTM Frequently Asked Questions (FAQ)</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DSM2 version 8.2</a></span>
                            </li>
                                                    <li>
                                <span><a href="DSM2_87228545.html">DSM2</a></span>
                            </li>
                                                    <li>
                                <span><a href="Documentation_87228546.html">Documentation</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DSM2 version 8.2 : PTM Frequently Asked Questions (FAQ)
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicky Sandhu</span> on Jan 27, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Moving from ptm source directory in github. This should belong in the documentation and not buried in source code</p></div></div><p><br/></p><h2 id="PTMFrequentlyAskedQuestions(FAQ)-Q1.WhatisPTM?">Q1. What is PTM?</h2><p>PTM is Particle Tracking Model. It is written partly in Java and partly in Fortran. I/O is mainly handled by Fortran.</p><h2 id="PTMFrequentlyAskedQuestions(FAQ)-Q2.WhataretheinputstoPTM?">Q2. What are the inputs to PTM?</h2><p>1. Hydrodynamic information:<br/>This is the dynamic information about flow, flow-area, (therefore velocity) and depth. This information comes from the tidefile which is generated by hydro. One has to make sure that in addition to the tidefile the correct network configuration is being used.Â  This information is typically done by the following io structure.</p><p>TIDEFILE<br/>START_DATE START_TIME END_DATE END_TIME FILENAME<br/>generic none length none tidefile.out<br/>END</p><p>2. Network configuration:<br/>This defines how channels and reservoirs are linked up and what their characteristics such as x-section, length, etcetra are. This also is read by Fortran. - channels.inp, xsects.inp, junctions.inp, reservoirs.inp, translations.inp</p><p>Refer to DSM2 docs</p><p>3. Particle information:</p><p>a. Type of particle:<br/>Uptil now we have been dealing only with neutrally-bouyant or particles with a certain falling velocity. For other kind of particles such as fish no IO had been decided.</p><p>b. Particle insertion information:<br/>Number of particles, time of insertion, location of insertion and duration of insertion. Refer to ptm_insertion.inp.<br/><br/>PARTINP<br/>[NODE NPARTS SDATE STIME EDATE ETIME] |<br/>44 500 01jan1990 0133 05jan1990 0333</p><p><br/>This means that insert 500 particles at 44 evenly distributed from start time to end time</p><p>[NODE NPARTS SDATE LENGTH] <br/>44 600 01jan1990 5days<br/>END<br/><br/>c. Run time information</p><p><br/>This is similar to run time settings for hydro and qual. Refer to DSM2 docs.</p><p>d. PTM has the following scalars</p><p><br/>SCALAR<br/>ptm_time_step 15min # PTM time step<br/>display_intvl 1hour # how often to display run progress<br/>ptm_ivert t # Use Vertical velocity profile<br/>ptm_itrans t # Use Transverse velocity profile<br/>ptm_iey t # Use transverse mixing<br/>ptm_iez t # Use vertical mixing<br/>ptm_fallvel 0.05 # settling velociy in ft/s<br/>ptm_random_seed 32001 # Starting Random Number Seed<br/>ptm_trans_constant 0.06 # Transverse Mixing Constant<br/>ptm_vert_constant 0.0067 # Vertical Mixing Constant<br/>END</p><p><br/>d. IO from PTM</p><p>IO_FILES<br/>MODEL TYPE IO INTERVAL FILENAME<br/>ptm anim out 15min anim.bin # animation file<br/>ptm trace out none trace.bin # trace file<br/>ptm restart out 6hours restart.out # restart output file<br/>ptm restart in none restart.inp # restart input file<br/>END</p><p>Animation file:<br/>Contains the data for the first 100 particles movement every time interval as specified. This is a binary file if the file name does not end in &quot;.out&quot; else it will be a ascii file. One can use PTM Animator to run the binary file to look at the animation visually</p><p>Trace file:<br/>The trace file contains the trace of every particle in the system. It records the entrance/exit of a particle into a waterbody such as a channel etcetra. &quot;.out&quot; for ascii file. The trace file is used to calculate the flux and so the flux may be calculated after the PTM run.</p><p>Restart file:<br/>This is a snapshot of the current locations of every particle inthe system. Useful mainly for restarting a run from a previously saved state.</p><p>Flux information:<br/>PARTICLE_FLUX<br/>FROM_WB TO_WB INTERVAL FILENAME B_PART<br/>chan, 216 | qext, cvp | 15min flux.txt past_CVP<br/>res,clfct | qext,swp | 15min flux.txt past_SWP<br/>chan,436,53 | chan,442,437 | 15min flux.txt past_Chipps<br/>chan, 441 | stage, mtz | 15min flux.txt past_MTZ<br/>| qext,div,-cvp, -ccc | 15min flux.txt Ag_Diversions<br/>| qext,div | 15min flux.txt All_Diversions<br/>END</p><p>This instructs ptm to calculate flux from the trace file. This can be done at the end of a ptm run or from a trace file later. Its the users responsibility to provide the correct network configuration The filename flux.txt means the user wants the output in ascii format else it would be flux.dss which is output in dss format. The DSS pathnames B part == B_PART from the above table.</p><p><br/>The interval at which the flux is calculated is as given above in the</p><p>INTERVAL column</p><p>The particle flux is calculated from a waterbody to a waterbody. A waterbody is specified by a type string followed by an identifier. The type string is one of chan, res, qext, stage.</p><p>The identifier is either a number for the the chan or a name as defined in the translations.inp file. If a generic type follows in place of the identifier than the flux tracks all particles entering or leaving that particular type of waterbody. If no from_wb or to_wb is defined it is<br/>assumed that it is the same as to all waterbodies.</p><p><br/>Particle dynamics:</p><p><br/>The particle can move in x, y and z directions. However as DSM2 is a 1-D model this information is gleaned by applying a vertical and transverse velocity profile to the average velocity available from the tidefile.</p><p>A particle has a deterministic and random component to its movement.</p><p>Deterministic component == Average velocity + transformations</p><p><br/></p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 16, 2023 11:04</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
