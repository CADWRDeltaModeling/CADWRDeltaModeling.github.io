<!DOCTYPE html>
<html>
    <head>
        <title>DSM2 version 8.2 : Tutorial 2: Reservoirs, Gates, Transfers</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DSM2 version 8.2</a></span>
                            </li>
                                                    <li>
                                <span><a href="DSM2_87228545.html">DSM2</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_87228717.html">Tutorials</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DSM2 version 8.2 : Tutorial 2: Reservoirs, Gates, Transfers
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicky Sandhu</span> on Jan 27, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><strong>Task</strong><br/>Add reservoirs, gates and object to object flow transfers to the simple channel grid created in tutorial 1<span> </span><br class="atl-forced-newline"/><strong>Skills Gained</strong></p><ul><li>Understanding of how reservoirs and gates are represented in DSM2</li><li>Learn how to transfer flow from one reservoir or node to another reservoir or node in DSM2<br/>The purpose of this tutorial is to learn how to add reservoirs, gates, and flow transfers to the simple channel-only grid created in Tutorial 1 (Figure 1). The grid we are going to create has the following configuration and specifications: The channel portion is identical to the simple channel model from Tutorial 1. Note that each tutorial is self contained, so it is not necessary to do Tutorial 1 before completing this tutorial.<br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="385" width="624" src="attachments/5931242/5931241.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddavd56eb5f63f4c9181cb2a8632c8c6c562.png?version=1&amp;modificationDate=1496695490303&amp;api=v2"></span></span><br/><strong>Figure 1- Simple channel with a new reservoir, gate, and flow transfer.</strong><span> </span><br class="atl-forced-newline"/>The following steps will instruct you on how to create these new features and add them to the simple channel system.<span> </span><br class="atl-forced-newline"/><br class="atl-forced-newline"/><strong>DSM2 Definitions</strong><span> </span><br class="atl-forced-newline"/><strong><em>Reservoir</em></strong><br/>In DSM2, reservoirs are open bodies of water that store flow and are connected to nodes by means of an energy-based equation. This means that flow moves between the reservoir and its connected node or channel whenever there is an energy imbalance (e.g. stage difference). Reservoirs are considered instantly well-mixed. The Reservoirs Table specifies the identity and physical properties of the reservoir. Connections to nodes are specified in the Reservoir Connections table. If it is desired to regulate flow between a reservoir and its connected node or channel, a gate device is used.<span> </span><br class="atl-forced-newline"/>In DSM2 applications for the Delta, reservoirs are used for actual reservoirs such as Clifton Court Forebay and for open water bodies such as flooded islands.<span> </span><br class="atl-forced-newline"/><strong><em>Gate</em></strong><br/>In DSM2, gates are sites that present a barrier or control on flow. A gate may have an arbitrary number of associated hydraulic devices (pipes and weirs), each of which may be operated independently to control flow.<span> </span><br class="atl-forced-newline"/>In DSM2 applications for the Delta, gates are used to represent the Delta Cross Channel, the Montezuma Slough Salinity Control Gates, and permanent or temporary barriers.<span> </span><br class="atl-forced-newline"/><strong><em>Object to Object Flow Transfer</em></strong><br/>Transfers are direct water connections from a reservoir or node to another reservoir or node. Transfers are instantaneous movements of water (and its constituents and particles) without any detailed description of physics or storage. The Transfer table specifies the connectivity of the transfer.<span> </span><br class="atl-forced-newline"/>In DSM2 applications for the Delta, object to object transfers have been used to represent proposed peripheral canal withdrawal and outflow locations.<span> </span><br class="atl-forced-newline"/>Additional information can be found in the DSM2 documentation by clicking on the *<em>START menu </em>* *_Programs  DSM2_v8  DSM2_documentation{*}._<span> </span></li></ul><ol><li><strong>Create the reservoir:</strong><ol><li>In Windows Explorer, navigate to the directory:<span> </span><em>\\{DSM2_home}\tutorial\simple\t2_reservoir_gate_transfer</em>.</li><li>Open<span> </span><em>hydro.inp.</em><span> </span>At the bottom of the file, Add the skeleton for the reservoir table:</li></ol></li></ol><p>RESERVOIR<br/>NAME AREA BOT_ELEV<br/>END</p><ol><li><ol><li>Enter the following values into the appropriate fields:<ol><li><ol><li>Name:<span> </span><em>res_1</em></li><li>Area (million sq ft):<span> </span><em>40</em></li><li>Bottom elev (ft):<span> </span><em>-24</em></li></ol></li></ol></li><li>Note from Figure 1 that the reservoir has two connections; one at Node 3, and one at Node 4. These will go in a child table called RESERVOIR_CONNECTION.<span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931242/5931243.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695490345&amp;api=v2"></span></span><span> </span>Some DSM2 input data tables are related to each other in what is referred to as a parent/child relationship. In the case of reservoirs, the RESERVOIR table is the parent table and the RESERVOIR_CONNECTIONS table is the child table that provides additional information related to the information in the parent table. The parent table must appear in the input file prior to the child table. The header has the following form:</li></ol></li></ol><p>RESERVOIR_CONNECTION<br/>RES_NAME NODE COEF_IN COEF_OUT<br/>END</p><ol><li><ol><li>Enter the following values into the appropriate fields for the first connection:<ol><li><ol><li>Res Name: res_1</li><li>Node:<span> </span><em>3</em></li><li>Res Coef (in):<span> </span><em>200</em></li><li>Res Coef (out):<span> </span><em>200</em></li></ol></li></ol></li><li>Enter the following values into the appropriate fields for the second connection:<ol><li><ol><li>Res Name: res_1</li><li>Node:<span> </span><em>4</em></li><li>Res Coef (in):<span> </span><em>200</em></li><li>Res Coef (out):<span> </span><em>200</em></li></ol></li></ol></li><li>Save the current settings.</li></ol></li></ol><p><br class="atl-forced-newline"/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931242/5931243.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695490345&amp;api=v2"></span></span><span> </span>To ensure conservation of mass at the beginning of a DSM2 simulation, it is good practice to set appropriate initial conditions. It is recommended to set all flows to zero and reservoir stage to zero.</p><ol><li><strong>Add Initial Conditions for the Reservoir:</strong><ol><li>Create the<span> </span><em>Reservoir Initial Conditions</em><span> </span><em>table</em>:<ol><li>The header and data are</li></ol></li></ol></li></ol><p>RESERVOIR_IC<br/>RES_NAME STAGE<br/>res_1 0.0<br/>END<span> </span></p><ol><li><strong>Create the Gate:</strong><ol><li>Now we are going to create the GATE table and its child table GATE_DEVICE. Note from Figure 1 that the gate is located at Node 2 of Channel 2. This gate consists of both a weir and a pipe. Therefore, two rows of information will be needed for the<span> </span><em>GATE_DEVICE</em><span> </span>table.</li><li>At the bottom of hydro.inp, add the skeleton for the GATE table:</li></ol></li></ol><p>GATE<br/>NAME FROM_OBJ FROM_IDENTIFIER TO_NODE<br/>END</p><ol><li><ol><li>In the<span> </span><em>Gates</em><span> </span><em>table</em>:<ol><li>Add a row and enter the following values into the appropriate fields:<ol><li>Name:<span> </span><em>gate_1</em></li><li>From object:<span> </span><em>channel</em></li><li>From identifier:<span> </span><em>2 [note that this 2 refers to channel 2]</em></li><li>to Node:<span> </span><em>2 [note that this 2 refers to node 2]</em></li></ol></li><li>Create a GATE_WEIR_DEVICE table with the following fields:</li></ol></li></ol></li></ol><p>GATE_NAME, DEVICE, NDUPLICATE, WIDTH, ELEV, HEIGHT, CF_FROM_NODE, CF_TO_NODE, DEFAULT_OP</p><ol><li><ol><li><ol><li>Enter the following values into the appropriate fields:<ol><li>Gate Name: gate_1</li><li>Device:<span> </span><em>weir</em></li><li>NDuplicate:<span> </span><em>2</em></li><li>Width:<span> </span><em>20</em></li><li>Elev:<span> </span><em>2</em></li><li>Height:<span> </span><em>9999.0</em></li><li>CF from Node:<span> </span><em>0.8</em></li><li>CF to Node:<span> </span><em>0.8</em></li><li>Default Op:<span> </span><em>gate_openNote: don't forget to close your table with END.</em><span> </span><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931242/5931244.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddavf9e3aa73957a24bdb115e43494948841.png?version=1&amp;modificationDate=1496695490418&amp;api=v2"></span></span><span> </span>How many weirs does this gate have?<br/>Hint: check out the value for number of duplicates</li></ol></li></ol></li></ol></li></ol><p><br/></p><ol><li><ol><li><ol><li>Create a GATE_PIPE_DEVICE table by looking up the appropriate headers in the DSM2 documentation by clicking on the START menu and selecting START menu<span> </span><em>Programs</em><span> </span><span> </span><em>DSM2_v8</em><span> </span><span> </span><em>DSM2_documentation</em><span> </span><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931242/5931243.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695490345&amp;api=v2"></span></span><span> </span>All table headers have to be in capital letters.</li></ol></li><li>Again, in the<span> </span><em>Gate Devices</em><span> </span>table:<ol><li>On a new line enter the following values into the appropriate fields:<ol><li>Gate Name: gate_1</li><li>Device Name:<span> </span><em>pipe</em></li><li>Number of duplicates:<span> </span><em>2</em></li><li>Radius:<span> </span><em>2</em></li><li>Elevation:<span> </span><em>2</em></li><li>Flow coefficient from Node:<span> </span><em>0.8</em></li><li>Flow coefficient to Node:<span> </span><em>0.8</em></li><li>Default Operation:<span> </span><em>gate_open</em></li></ol></li></ol></li><li>Save the current settings.<span> </span><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931242/5931244.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddavf9e3aa73957a24bdb115e43494948841.png?version=1&amp;modificationDate=1496695490418&amp;api=v2"></span></span><span> </span>How would you change the gate device table to only allow flow in one direction? Hint: review gate operation options in the documentation.</li></ol></li><li><strong>Create the Transfer:</strong></li></ol><p>A transfer is a momentum-free transfer of water from one node or reservoir to another node or reservoir. We are going to create a continuous transfer of 40cfs of water from the reservoir res_1 to node 6.</p><ol><li><ol><li>Below the gate input, create the<span> </span><em>TRANSFER</em><span> </span><em>table</em><ol><li>The headers are:</li></ol></li></ol></li></ol><p>TRANSFER<br/>NAME FROM_OBJ FROM_IDENTIFIER TO_OBJ TO_IDENTIFIER<br/>END</p><ol><li><ol><li><ol><li>Enter the following values into the appropriate fields:<ol><li>Name:<span> </span><em>transfer_1</em></li><li>From Object:<span> </span><em>reservoir</em></li><li>To identifier:<span> </span><em>res_1</em></li><li>To Object:<span> </span><em>node</em></li><li>To identifier:<span> </span><em>6</em></li></ol></li></ol></li><li>Save the current settings.</li></ol></li></ol><p><br/></p><ol><li><strong>Add the Transfer Flow Time Series:</strong></li></ol><p>We have created the transfer physically, but we have not assigned it a flow. This is done on a separate table, so that the specifications of the transfer can be used with different operations or hydrologies. Flow will be 40cfs.</p><ol><li><ol><li>In hydro.inp, create the<span> </span><em>Transfer Time Series</em><span> </span>table:<ol><li>The headers are:</li></ol></li></ol></li></ol><p>INPUT_TRANSFER_FLOW<br/>TRANSFER_NAME FILLIN FILE PATH<br/>END</p><ol><li><ol><li><ol><li>Enter the following values into the appropriate fields:<ol><li>Input Name:<span> </span><em>transfer_1</em></li><li>Fillin:<span> </span><em>last</em></li><li>Input File:<span> </span><em>constant</em></li><li>Path/Value:<span> </span><em>40</em></li></ol></li></ol></li><li>Save the current settings.</li></ol></li></ol><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931242/5931244.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddavf9e3aa73957a24bdb115e43494948841.png?version=1&amp;modificationDate=1496695490418&amp;api=v2"></span></span><span> </span>How would you change the flow transfer from a constant value to a time varying value?<br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="85" width="585" src="attachments/5931242/5931245.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddav8833b1c831b4ff3c27cb1f7ef0c33253.png?version=1&amp;modificationDate=1496695490825&amp;api=v2"></span></span><br/>Note: the values shown in the last two columns are descriptions of the information that would go in that field; they are not actual field values. See Basic Tutorial 4 for more information on using time series data in DSM2.<span> </span></p><ol><li><strong>Running HYDRO and QUAL</strong><ol><li>In Windows Explorer, navigate to the directory: _<br class="atl-forced-newline"/><br/><span class="error" style="color: rgb(51,51,51);">Unknown macro: {DSM2_home}tutorialsimple{_}</span>.</li><li>Right-click on the directory,<span> </span><em>t2_reservoir_gate_transfer</em>, and select<span> </span><em>Open Command Window Here</em>.</li><li>In the command window, type:<span> </span><em>hydro hydro.inp</em>.</li><li>In the command window, type:<span> </span><em>qual qual.inp</em>.</li><li>Open the<span> </span><em>output.dss</em><span> </span>file in the<span> </span><em>t2_reservoir_gate_transfer</em><span> </span>directory, and examine<span> </span><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="96" width="82" src="attachments/5931242/5931246.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddavfc12b6cdb26e67dfc2a101ee2af340bd.png?version=1&amp;modificationDate=1496695490887&amp;api=v2"></span></span><span> </span>the results.</li></ol></li></ol><p><br/></p><ol><li><strong>Brain teasers</strong><ol><li>The equation for inflow from a node to a reservoir through a gate is as follows:<span> </span><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="32" width="286" src="attachments/5931242/5931247.png" data-image-src="http://msb-confluence/download/attachments/5931242/worddaved66c7e251a12fc539b16dd2a232b5d1.png?version=1&amp;modificationDate=1496695491277&amp;api=v2"></span></span><span> </span>Lookup the equation for a reservoir connection in the documentation. Write it down next to the gate equation. Assuming they both represent the same basic orifice physics, what terms in the gate equation does the reservoir coefficient C lump together?</li><li>Clifton Court Forebay has five duplicate radial gates connecting it to the surrounding channel. Each has a crest elevation of -10.1ft and a width of 20ft:<ol><li>If water is at 0 ft and the five gates are open, what is the area exposed to flow?</li><li>If the weirs are perfectly efficient (no loss, coefficients of 1.0), what would be the equivalent &quot;lumped&quot; reservoir coefficient for these gates?</li><li>DSM2 version 6 had a calibrated reservoir coefficient of 1800^^ Note that the value of 1800 is the DSM2v6 value of 2400 adjusted so that it matches the reservoir equation and v8. In version 6 the coefficient was multiplied by an undocumented 0.75 factor. DSM2v8 uses the reservoir coefficient as specified.. Was this value physical given the assumptions of the model? What alternate value might you use? Why might the version 6 value have been acceptable – are there explanations having to do with the model assumptions?</li></ol></li></ol></li></ol>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228759/87228758.png">worddaved66c7e251a12fc539b16dd2a232b5d1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228759/87228760.png">worddavfc12b6cdb26e67dfc2a101ee2af340bd.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228759/87228761.png">worddav8833b1c831b4ff3c27cb1f7ef0c33253.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228759/87228762.png">worddavf9e3aa73957a24bdb115e43494948841.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228759/87228763.png">worddave8e1df4e853bb46c4ee6f68afece040d.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228759/87228764.png">worddavd56eb5f63f4c9181cb2a8632c8c6c562.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 16, 2023 11:04</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
