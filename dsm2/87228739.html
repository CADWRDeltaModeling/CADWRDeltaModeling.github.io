<!DOCTYPE html>
<html>
    <head>
        <title>DSM2 version 8.2 : Tutorial 1: Channels</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DSM2 version 8.2</a></span>
                            </li>
                                                    <li>
                                <span><a href="DSM2_87228545.html">DSM2</a></span>
                            </li>
                                                    <li>
                                <span><a href="Tutorials_87228717.html">Tutorials</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DSM2 version 8.2 : Tutorial 1: Channels
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicky Sandhu</span> on Jan 27, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><strong>Task</strong><br/>Run DSM2 for a steady boundary condition flow and salinity (EC-electrical conductivity) simulation for a simple straight channel grid<span> </span><br class="atl-forced-newline"/><strong>Skills Gained</strong></p><ul><li>Get started with DSM2</li><li>Creating channels</li><li><p class="auto-cursor-target">Establishing initial and boundary conditions<br/>The purpose of this tutorial is twofold: to get a start with the DSM2 model and to get practice setting up channels. We will set up a simple channel-only grid with simple constant boundary conditions and run both HYDRO and QUAL. We will look at two formats for entering cross-section geometry (the new DSM2 single file format and CSDP [Cross Section Development Program] format) and we will familiarize ourselves with the<span> </span><em>echo</em><span> </span>output file that gives you a single-file complete record of all the input data used in a DSM2 module.<span> </span><br class="atl-forced-newline"/>For the tutorial, the channels have the following configuration and specifications:<br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="270" width="624" src="attachments/5931233/5931232.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddav205660d02ed6265e4cb0afe559da213a.png?version=1&amp;modificationDate=1496695415869&amp;api=v2"></span></span><br/><strong>Figure 1 - Simple channel configuration and specifications.</strong><span> </span><br class="atl-forced-newline"/>Note that there are two cross-section geometries labeled A and B which will be specified later in this tutorial. In all the channels except Channel 5 the cross sections have been assigned at the midpoint of the channel. In Channel 5 the cross-sections are assigned at fractions 0.2 and 0.8 of the length of the channel measured from the upstream end. The DSM2 distribution includes a map of the Delta grid with arrows pointing from upstream to downstream (the positive direction is typically seaward flow) e.g.<span> </span><em>\delta\dsm2_v8\documentation\DSM2_Grid2.0.pdf.</em></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><td class="highlight-blue confluenceTd" title="Background colour : Blue" data-highlight-colour="blue"><div class="content-wrapper" title=""><p class="auto-cursor-target"><strong><em>Overview of DSM2 Channel Cross Sections</em></strong><br/>DSM2 assumes a piecewise linear cross-sectional bathymetry. Width, area and wetted perimeter are tabulated according to elevation. Each elevation lists the data (width) or cumulative data (wetted perimeter and area) below the given elevation. Anything above the top elevation is extrapolated using a slope given by a global scalar called<em>levee_slope</em>.<br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="255" width="624" src="attachments/5931233/5931234.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddava830b637c91154fb80e4ecec9aa946da.png?version=1&amp;modificationDate=1496695416280&amp;api=v2"></span></span><br/><strong>Figure 2: Piecewise linear bathymetry</strong><br/>For instance, for a cross section half way downstream in a fictitious channel 123 the five layers of a cross-section with elevations given by Figure 2, might be tabulated:</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>XSECT_LAYER
CHAN_NO DIST ELEV AREA WIDTH WET_PERIM
123 0.5 -14.6 0.0 0.0 0.0
123 0.5 -9.2 216.0 80.0 102.5
123 0.5 -4.0 736.0 120.0 111.0
123 0.5 9.5 2410.0 160.0 142.3
123 0.5 12.0 3028.5 162.0 148.0</pre>
</div></div><p class="auto-cursor-target">The above table is in the single-file DSM2 cross-section format. An analogous table is produced by the Cross Section Development Program (CSDP). We will practice using both in the tutorial. The parameter<em>levee_slope</em>is seldom changed from its standard value of 0.33.</p></div></td></tr></tbody></table></div><p class="auto-cursor-target"><br/>The following steps will instruct you on how to create the channels, give them very simple boundary conditions and run the model.</p></li></ul><ol><li><strong>Open the hydro input file and add parameters:</strong><ol><li>For this tutorial, you will want to use Notepad++ (recommended<span> </span><a style="text-decoration: none;" href="http://notepad-plus.sourceforge.net/" rel="nofollow" class="external-link">http://notepad-plus.sourceforge.net</a>), Textpad or Emacs – some text editor that will not add special markup to your input.</li><li>Navigate to the<span> ${</span><em>DSM2_home}\tutorial\simple\t1_channels</em><span> </span>directory and this directory will be referred to as the<span> </span><em>tutorial directory</em><span> </span>below.</li><li>Open the<span> </span><em>hydro.inp</em><span> </span>file using one of the text editors recommended in 1a.</li></ol></li><li><strong>In HYDRO, add the Scalar Runtime information:</strong><ol><li>DSM2 input files use a keyword based table structure. Each table begins with a keyword on the first line and column headings (called<span> </span><em>field headers</em>) on the second line. There are as many lines of data as needed in the middle of the table, and the table closes with an &quot;END&quot; line and a carriage return.</li><li>In the<span> </span><em>hydro.inp</em><span> </span>file, locate the SCALAR table. Scalars are name-value pairs that control the model or define constants and runtime parameters. Some scalar parameters are already defined in the sample file.</li><li><p class="auto-cursor-target">Add the following run date, run time and temporary directory scalars at the top of the<span> </span><em>SCALAR</em><span> </span>table and save. </p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><td class="confluenceTd"><div class="content-wrapper"><div class="table-wrap"><table class="wrapped confluenceTable"><tbody><tr><th class="confluenceTh"><div class="content-wrapper"><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>Spaces or tabs can be used between values</p></div></th></tr></tbody></table></div></div></td></tr></tbody></table></div><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>SCALAR
NAME VALUE
run_start_date 01JAN1992 #scalars to be added
run_end_date 01MAR1992   #scalars to be added
run_start_time 0000      #scalars to be added
run_end_time 0000        #scalars to be added
temp_dir c:/temp
title &quot;TUTORIAL SIMULATION ${DSM2MODIFIER}&quot; # [other scalars already included in the file]
warn_unchecked false
END</pre>
</div></div><p>Note that temp_dir should be set to a location with ample disk space for production runs. This is a scratch directory where DSM2 stores cached results.</p></li></ol></li><li><strong style="letter-spacing: 0.0px;"><strong style="letter-spacing: 0.0px;">In HYDRO, add Channel information:<br/></strong></strong><p>Next we will add a table of channels, including connectivity, and conveyance/dispersion parameters. We are also going to add the cross-section geometry using the XSECT_LAYER section, which is introduced in Version 8. (CSDP-styled input is discussed later).</p><ol><li><p class="auto-cursor-target">The<span> </span><em>CHANNEL</em><span> </span>table requires: a channel number, length, Manning's n, dispersion coefficient, node number to identify the upstream end and node number at the downstream end. Type the table and field headers for the CHANNEL table at the bottom of the<span> </span><em>hydro.inp</em><span> </span>file:<br/><br/></p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>CHANNEL
CHAN_NO LENGTH MANNING DISPERSION UPNODE DOWNNODE</pre>
</div></div></li><li> Open the file<span> </span><em>channel_tutorial_starter.txt</em><span> </span>and copy the data for channels 1-6 and channel 2004 from the CHANNEL table of the tutorial data file and paste it into the newly created CHANNEL table in your hydro.inp file.</li><li>Type END after the last row to end the table.</li><li><p class="auto-cursor-target">Now create the XSECT_LAYER, table which will contain one row for every vertical layer in every user-defined cross-section. This table is new in Version 8, and is intended to allow input to be represented in a single file and using a single input style – making archives and comparisons simpler. Below the CHANNEL table, create the skeleton for the XSECT_LAYER table:</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>XSECT_LAYER
CHAN_NO DIST ELEV AREA WIDTH WET_PERIM
[data will go here]
END</pre>
</div></div><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><td class="confluenceTd"><div class="content-wrapper"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span><span>Typically in DSM2 input files, the order of the tables is not important. However, when one table refers to information defined in another table, the &quot;parent&quot; table with the definition typically appears first in the input file. In this case the CHANNEL table must be before the XSECT_LAYER table.</span></div></td></tr></tbody></table></div></li><li><p class="auto-cursor-target">In the first row, we will start defining a cross-section for channel #1. We will be entering three rows for Channel 1, each of which will have a &quot;1&quot; in the CHAN_NO column. The data will be located midway downstream along the channel, so in the<span> </span><em>Distance (fraction</em>) field, type<span> </span><em>0.5</em>. The three rows of data are given below</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>XSECT_LAYER
CHAN_NO DIST ELEV AREA WIDTH WET_PERIM
1 0.5 -24.0 0.0 40.0 40.0
1 0.5 0.0 960.0 80.0 102.5
1 0.5 20.0 2640.0 160.0 192.0</pre>
</div></div></li><li>Copy and paste the three rows of data for Channel 1 three times for Channels 2, 3 and 2004 and change the channel number. Note that changing the channel number to 2004 will shift the data so that it no longer lines up with rows above it. DSM2 reads the values in order and doesn't care about the spacing, but you can adjust the spacing for aesthetic reasons if you want and later we will encounter dsm2_tidy a utility for tidying up the tables automatically. Copy the three data lines one more time for Channel 5, this time changing the Channel number to 5 and the distance to 0.2.</li><li><p class="auto-cursor-target">There is an additional cross-section given for Channel 5, cross-section &quot;B&quot;. The cross section is located in Channel 5, 0.8 of the way from the upstream end to the downstream end as indicated on the schematic at the beginning of the tutorial. Enter the cross section as shown below.</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>XSECT_LAYER
CHAN_NO DIST ELEV AREA WIDTH WET_PERIM
5 0.8 -20.0 0.0 60.0 60.0
5 0.8 -4. 1120.0 80.0 97.74
5 0.8 2.0 1660.0 100.0 121.06
5 0.8 10.0 2700.0 160.0 183.16</pre>
</div></div></li><li>Copy the cross section data from Channel 5 Distance 0.8 to use it for Channel 6, but change the Distance to 0.5.</li></ol><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>Make sure the table is terminated with an END line with a carriage return and save your file.<span> </span></p></li><li><strong style="letter-spacing: 0.0px;">In HYDRO, set the Boundary information:<br/></strong><p>In this section we are going assign very simple boundary conditions to the upper and lower ends of the channel system.<span> </span><br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>Note that if you do not set boundary conditions at the end of a channel, a &quot;no-flow&quot; boundary (Q=0.0) is assumed.</p><ol><li>The upstream boundary will be a constant inflow.</li><li><p class="auto-cursor-target">In<span> </span><em>hydro.inp</em>, enter an input table for the inflow:</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>BOUNDARY_FLOW
NAME NODE SIGN FILLIN FILE PATH
upstream_flow 1 1 last constant 200.
END</pre>
</div></div><p class="auto-cursor-target">This line assigns a constant inflow of 200.0 cfs to the upstream boundary. The NAME column will be used 1) to associate quality inputs with inflows and 2) for prioritizing data in multiple input files. The NODE field assigns the input to Node #1. The FILLIN field is an instruction to the model as to how to interpolate data in time, which is not relevant for a constant value.<br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span>DSM2 assumes consistent units and typically simulates flows in cfs.</p></li><li>Start an input table for the downstream stage boundary: The headers FILE and PATH are more intuitive for time varying boundary conditions where a file name and a file location (path) are specified for a file that contains the time varying information. For a constant boundary condition FILE is set to &quot;constant&quot; and PATH is set to the boundary condition value</li><li><p class="auto-cursor-target">The downstream boundary will be a constant water surface (stage) boundary.</p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>BOUNDARY_STAGE
NAME NODE FILLIN FILE PATH
[data go here]
END</pre>
</div></div></li><li>In the BOUNDARY_STAGE table, enter the following values into the appropriate fields and save:</li></ol><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>Although spaces or tabs can be used, columns with spaces tend to look better when opened in a different viewer. You can use the dsm2_tidy utility to clean up columns and spaces. Type dsm2_tidy --help at a command prompt for more info.</p><ol><li style="list-style-type: none;"><ol><li style="list-style-type: none;"><ol><li>Input Name:<span> </span><em>downstream_stage</em></li><li>Node:<span> </span><em>7</em></li><li>Fillin:<span> </span><em>Last</em></li><li>Input File:<span> </span><em>constant</em></li><li><p>Path/Value:<span> </span><em>0.0</em></p></li><li>END the table and save the file.</li></ol></li></ol></li></ol></li><li><strong><strong>In HYDRO, set the Initial Conditions for stage and flow:<br/></strong></strong><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>A default hydrodynamic initial condition is required for every channel in DSM2.<br/>The initial condition can be replaced using a restart file, but the default must still be entered now. For each of the channels, the stage and flow will be set to<span> </span><em>0</em>. These<span> </span><em>0</em>-values will be applied at both the<span> </span><em>0</em><span> </span>and<span> </span><em>length</em><span> </span>(distance to downstream end of channel) distances along the channel. With six channels, and two locations to set the values, there will be a total of 12 rows.</p><ol><li style="list-style-type: none;"><ol><li>In the hydro.inp file, start the initial condition table:</li></ol></li></ol><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>CHANNEL_IC
CHAN_NO DISTANCE STAGE FLOW
1 0 0.0 0.0
1 length 0.0 0.0
[further data will go here]
END</pre>
</div></div><p>Copy the two lines of data and paste them into the input file for all of the channels. Refer back to Figure 1 for the channel numbers.</p><strong><strong><br/></strong></strong></li><li><strong><strong><strong>In HYDRO, Specify the Output Locations:<br/></strong></strong></strong><p>Lastly, we specify the output locations. For this tutorial, we will request flow and stage at the two boundaries, two locations along Channel 2, and the beginning of Channel 2004. These choices will be used to illustrate some points in a later tutorial when we look at Layering. Feel free to add anything that interests you.</p><ol><li style="list-style-type: none;"><ol><li>In<span> </span><em>hydro.inp</em>, create the skeleton OUTPUT_CHANNEL table using the following header:</li></ol></li></ol><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>OUTPUT_CHANNEL
NAME CHAN_NO DISTANCE VARIABLE INTERVAL PERIOD_OP FILE
[data will go here]
END</pre>
</div></div><p><br/></p><ol><li style="list-style-type: none;"><ol><li>The output request rows may be found in the file output_channel_tutorial.inp. Copy them into<span> </span><em>hydro.inp</em>.</li><li>Save and close the<span> </span><em>hydro.inp</em><span> </span>file.</li></ol></li></ol><strong><strong><br/></strong></strong></li><li><strong>In</strong><span> </span><strong>QUAL, add the Scalar Runtime information:<br/></strong><ol><li style="list-style-type: none;"><ol><li>The file<span> </span><em>qual.inp</em><span> </span>already has a SCALAR section. Add the following run time and temporary directory SCALARS above the others:</li></ol></li></ol><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>SCALAR
NAME VALUE
run_start_date 02JAN1992
run_end_date 01MAR1992
run_start_time 0000
run_end_time 0000
temp_dir c:/temp
[Existing scalars]
END</pre>
</div></div></li><li><strong><strong>In QUAL, set the Boundary Concentration information:<br/></strong></strong><ol><li style="list-style-type: none;"><ol><li>Boundary conditions in QUAL for the constituent<span> </span><em>ec</em><span> </span>are specified in the NODE_CONCENTRATION table:</li></ol></li></ol><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>NODE_CONCENTRATION
NAME NODE_NO VARIABLE FILLIN FILE PATH
END</pre>
</div></div><p><br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span>The names of the inputs must be EXACTLY the same as given in hydro – this is how input concentrations are matched with input flows.</p><ol><li style="list-style-type: none;"><ol><li>In the<span> </span><em>Node</em><span> </span><em>Concentration</em><span> </span>table, add an upstream concentration row. The name for this boundary condition must match the corresponding boundary in hydro – this name-matching is how flows and concentrations are paired. See section 2.b for the NAME used in this tutorial and Figure 1 for the node numbers. In the new row, enter the following information into the appropriate fields:<ol><li style="list-style-type: none;"><ol><li>Input Name:<span> </span><em>upstream_flow</em>.</li><li>Node:<span> </span><em>1</em></li><li>Variable:<span> </span><em>ec</em></li><li>Fillin:<span> </span><em>last</em></li><li><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>The period after the value is to indicate it is not an integer.Input File:<span> </span><em>constant</em></li><li>Path/Value:<span> </span><em>200</em></li></ol></li></ol></li></ol></li></ol><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>DSM2 does not care what units are used for constituent concentrations, but all concentrations must be in the same units. For<span> </span><em>ec</em>, uS/cm are typically used.</p><ol><li style="list-style-type: none;"><ol><li>In the<span> </span><em>Node_Concentration</em><span> </span>table in<span> </span><em>qual.inp</em>, add a downstream boundary concentration row. The downstream concentration is going to be higher than the upstream one since we are later going to turn this into a tidal boundary in a later tutorial. Enter the following information into the next row of the table:<ol><li style="list-style-type: none;"><ol><li>Input Name:<span> </span><em>downstream_stage</em>.</li><li>Node:<span> </span><em>7</em></li><li>Variable:<span> </span><em>ec</em></li><li>Fillin:<span> </span><em>last</em></li><li>Input File:<span> </span><em>constant</em></li><li>Path:<span> </span><em>30000</em></li></ol></li></ol></li><li>Save the current settings.</li></ol></li></ol><p><br/></p></li><li><strong><strong>In QUAL, Specify Output Locations:<br/></strong></strong><p><br/></p><p>In QUAL, you can request<span> </span><br/>1) concentration data, 2) concentration data with source tracking or 3) flow and stage data (which can be confusing if not output at the model time step). In this tutorial, our requests will include<span> </span><em>ec</em><span> </span>at the two boundaries, two locations along Channel 2, and the beginning of Channel 2004.</p><ol><li style="list-style-type: none;"><ol><li>In<span> </span><em>qual.inp</em>, create a QUAL Output table:</li><li>In the<span> </span><em>OUTPUT_CHANNEL</em><span> </span>table, add the following lines:</li></ol></li></ol><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>OUTPUT_CHANNEL
NAME CHAN_NO DISTANCE VARIABLE INTERVAL PERIOD_OP FILE
bnd_1 1 0 ec 15min inst ${QUALOUTDSSFILE}
bnd_6 6 length ec 15min inst ${QUALOUTDSSFILE}
chan2_half 2 7500 ec 15min inst ${QUALOUTDSSFILE}
chan2_length 2 length ec 15min inst ${QUALOUTDSSFILE}
chan2004 2004 0 ec 15min inst ${QUALOUTDSSFILE}
END</pre>
</div></div><p><br/></p><ol><li style="list-style-type: none;"><ol><li>Save and close the file.</li></ol></li></ol><p><br/></p></li><li><strong><strong>Running HYDRO and QUAL<br/></strong></strong><p>DSM2v8 runs hydro and qual sequentially. The hydrodynamic data from the hydro run is an input to the qual simulation.<span> </span><br class="atl-forced-newline"/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931236.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddavf9e3aa73957a24bdb115e43494948841.png?version=1&amp;modificationDate=1496695416538&amp;api=v2"></span></span><span> </span>Hydro can be run without qual, but can qual be run without hydro?<span> </span><br class="atl-forced-newline"/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>The DSM2 tutorials assume that you have installed Microsoft's power tool<span> </span><strong><em>Open Command Window Here</em></strong>. To get this and other recommended 3<sup>rd</sup><span> </span>party extras for DSM2, go to the<span> </span><strong><em>Recommended Third Party Extras</em></strong><span> </span>section of the DSM2 documentation by clicking on the START menu and selecting<span> </span><strong>START MENU </strong><span> </span><strong><em>Programs</em></strong><span> </span><strong></strong><strong><em>DSM2_v8</em></strong><span> </span><strong></strong><span> </span><strong><em>DSM2_documentation</em></strong><br/>If you do not want to install the<span> </span><em>Open Command Window Here</em><span> </span>tool, then you can use a command shell and change directories to the indicated directory. To open a command shell, click on the START menu and select<span> </span><em>Run</em>. In the box type<span> </span><em>cmd</em><span> </span>if it does not come up as the default. Click on OK.</p><p><br/></p><ol><li style="list-style-type: none;"><ol><li>In Windows Explorer, navigate to the directory: _<br class="atl-forced-newline"/><br/><span class="error" style="color: rgb(51,51,51);">Unknown macro: {DSM2_home}tutorialsimple{_}</span>.</li><li>shift+Right-click on the directory,<span> </span><em>t1_channels</em>, and select<span> </span><em>Open Command Window Here</em>.</li></ol></li></ol><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="398" width="523" src="attachments/5931233/5931237.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddav4210fc49d3b08515b01f2dd5efbf5d85.png?version=1&amp;modificationDate=1496695416674&amp;api=v2"></span></span></p><ol><li style="list-style-type: none;"><ol><li>In the command window, type:<span> </span><em>hydro hydro.inp</em><span> </span>and press enter.</li></ol></li></ol><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="116" width="562" src="attachments/5931233/5931238.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddavb255646388081f14834ad64cb2ebb184.png?version=1&amp;modificationDate=1496695416727&amp;api=v2"></span></span><br/>Note that several lines will appear in the command window very quickly. There may then be a delay while data is processed. Then &quot;Starting hydro computations for time X&quot; will appear. A successful model run is completed after a &quot;Normal program end&quot; statement and the command prompt returns.</p><ol><li style="list-style-type: none;"><ol><li>HYDRO will then run(it may take a few minutes) and create an<span> </span><em>output.dss</em><span> </span>file in the same directory.</li><li>To run QUAL, in the command window, type:<span> </span><em>qual</em><span> </span><em>qual.inp</em>.</li><li>QUAL will then run and add output to the<span> </span><em>output.dss</em><span> </span>file. A successful qual run will produce a &quot;Normal program end&quot; statement and return to the command prompt. Qual takes longer to run than hydro did.</li><li>Open the<span> </span><em>output.dss</em><span> </span>file and examine the results.</li></ol></li></ol><p><br/></p></li><li><strong><strong>CSDP style cross-sections<br/></strong></strong><p>You can also run the model using cross-sections in the <span class="inline-comment-marker" data-ref="b7d0253e-8748-4980-9994-9b0769f60915">CSDP format</span>. This is the form most familiar to DSM2 users. Mixing CSDP format with other formats may produce unpredictable results.<br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>Two caveats. First, there are no<span> </span><em>rectangular cross-sections</em><span> </span>in Version 8. The rectangular and irregular cross-sections in Version 6 were not consistent: a regular cross-section and its equivalent representation in the irregular format did not give the same result. The discrepancy was due to different interpolation rules. In Version 8, we have dropped the &quot;irregular&quot; nomenclature because this is the only kind of cross section we support. The practical consequence of the change is that you are going to need a cross-section for every channel, and to get this you will need a data set targeted at Version 8. The Version 8 cross sections for the Delta are provided in the advanced tutorials.<br/>In the tutorial, you will find that the CSDP version of the cross sections are represented in two files: xsect_a.txt and xsect_b.txt. Recall that earlier in the tutorial the single file format cross sections were specified in the<span> </span><em>hydro.inp</em><span> </span>file. Now we will create a new launch file called hydro_csdp.inp that is going to reference the text files instead of listing the data explicitly.</p><ol><li style="list-style-type: none;"><ol><li>Copy<span> </span><em>hydro.inp</em><span> </span>to<span> </span><em>hydro_csdp.inp</em><span> </span><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span><span> </span>it doesn't matter what you name the file, but don't skip this step</li><li>In<span> </span><em>hydro_csdp.inp</em>, erase the XSECT_LAYER table and replace it with the following XSECT table that will point to the cross-section files.</li></ol></li></ol><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>XSECT
CHAN_NO DIST FILE
1 0.5 xsect_a.txt
[other xsects go here]
END</pre>
</div></div><p><br/><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="29" width="29" src="attachments/5931233/5931235.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddave8e1df4e853bb46c4ee6f68afece040d.png?version=1&amp;modificationDate=1496695416326&amp;api=v2"></span></span>When running DSM2v8, use either the Version 8 format (XSECT_LAYER from section 3 in this tutorial) or use the CSDP format presented in this part of the tutorial. DO NOT MIX AND MATCH IN ONE FILE.</p><ol><li style="list-style-type: none;"><ol><li>Create the table using the same channel-distance combinations as we used before. Use cross-sections A and B as designated in Figure 1.</li><li>In the IO_FILE table, change the name of the echoed output file to hydro_echo_csdp.inp. As a bonus exercise you could change the environmental variables to accomplish nearly the same thing.</li></ol></li></ol></li><li><strong><strong>Rerun HYDRO and compare cross-sections formats<br/></strong></strong><p>Now we want to run hydro with the alternate input from CSDP. To verify that we get the same cross-sections using the CSDP format, we are going to scrutinize the echo input file.</p><ol><li style="list-style-type: none;"><ol><li>Open the echoed input file from your first run. The file name is<span> </span><em>channel_hydro_echo.inp</em>. Do a search for XSECT_LAYER. This file echoes the input used on your previous run, and is what we are trying to match.</li><li>Rerun hydro using the command:</li></ol></li></ol><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: python; gutter: false; theme: Confluence" data-theme="Confluence">&gt; hydro hydro_csdp.inp</pre>
</div></div><p><br/></p><ol><li style="list-style-type: none;"><ol><li>Compare the echoed cross-sections to those in<span> </span><em>hydro_echo_csdp.inp</em><span> </span>Use your text editor or a &quot;diff&quot; tool.</li></ol></li></ol></li><li><strong><strong>Run HYDRO using echoed input.<br/></strong></strong><p>Finally, let's take a look at the echoed output file and verify that it is an exact one-file replica of the *.inp data that went into the run. This is a powerful archiving option.</p><ol><li style="list-style-type: none;"><ol><li>Rerun hydro using<span> </span><em>hydro.inp</em>.</li><li>Open<span> </span><em>channel_hydro_echo.inp.</em></li><li>Locate the IO_FILE section and change the name of the echoed input file (first entry) to echo_echo.inp.</li><li>Save and close channel_hydro_echo.inp</li><li>Run the model using<span> </span><em>channel_hydro_echo.inp</em>. At a command prompt type:</li></ol></li></ol><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: python; gutter: false; theme: Confluence" data-theme="Confluence">&gt; hydro channel_hydro_echo.inp</pre>
</div></div><p><br/></p><ol><li>Compare the output from your first run (<em>channel_hydro_echo.inp</em>) to the second run (<em>echo_echo.inp</em>). Are they the same?.<span><span> <br/></span></span><hr/></li></ol></li></ol><p><br/></p><hr/><p><span class="image-wrap"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-external-resource" height="96" width="82" src="attachments/5931233/5931239.png" data-image-src="http://msb-confluence/download/attachments/5931233/worddavfc12b6cdb26e67dfc2a101ee2af340bd.png?version=1&amp;modificationDate=1496695416926&amp;api=v2"></span></span><span> </span></p><ol><li><strong>Brain teasers</strong><ol><li>What is the actual delta-x between computational points for each of the subreaches (channels 1-6)?</li><li>(Advanced – for hydrodynamics people) Why is the requested dx the minimum spatial step for each reach? Isn't finer better? Wouldn't you want to impose a maximum on how big dx can be?</li><li>Change the bottom elevation of one of the cross-sections in the tutorial by lowering it 5ft. Do not alter the other vertical layers in the cross-section. For a typical water surface you will not be altering the properties of the cross-section. Can you think of two ways you<span> </span><strong>are</strong><span> </span>changing the simulation? Are they both &quot;real&quot;? What are the implications for representing a dredged channel in a study?</li></ol></li></ol><p><br/></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228738.png">worddav9894d5ad3645a3d4dcca771791ed6ad0.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228740.png">worddavacdb763f7814807ae1cee2e37e7cb36a.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228741.png">worddavcf31df39a0b70101e885bccc73c06634.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228742.png">worddavc62041d7d99031387651e87bef05c94c.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228743.png">worddav5c53d93320a102e56a6cc9f283292eb3.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228744.png">worddavb6a63211b4b9979e82bf279fed459047.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228745.png">worddav21c20dc2a8dba2bb107fee628b41a137.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228746.png">worddava88bd90db3de962e7f96da3b1f2909fe.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228747.png">worddavec32b1550654d1f335e93b8c9a94363c.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228748.png">worddav93cd7067934415ddc9fb611bb5bf2149.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228749.doc">BasicTutorial1-Channels.doc</a> (application/msword)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228750.png">worddav457e267c6829c66a691aad41b4e6e433.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228751.png">worddavfc12b6cdb26e67dfc2a101ee2af340bd.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228752.png">worddavb255646388081f14834ad64cb2ebb184.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228753.png">worddav4210fc49d3b08515b01f2dd5efbf5d85.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228754.png">worddavf9e3aa73957a24bdb115e43494948841.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228755.png">worddave8e1df4e853bb46c4ee6f68afece040d.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228756.png">worddava830b637c91154fb80e4ecec9aa946da.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228739/87228757.png">worddav205660d02ed6265e4cb0afe559da213a.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 16, 2023 11:04</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
