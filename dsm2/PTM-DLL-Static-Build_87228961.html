<!DOCTYPE html>
<html>
    <head>
        <title>DSM2 version 8.2 : PTM DLL Static Build</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DSM2 version 8.2</a></span>
                            </li>
                                                    <li>
                                <span><a href="DSM2_87228545.html">DSM2</a></span>
                            </li>
                                                    <li>
                                <span><a href="Developer-and-Build_87228890.html">Developer and Build</a></span>
                            </li>
                                                    <li>
                                <span><a href="CMake-Build_87228956.html">CMake Build</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DSM2 version 8.2 : PTM DLL Static Build
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nicky Sandhu</span> on Jan 27, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>On windows it is not straightforward to compile to a DLL by mixing /MT (static) and /MD (dynamic) linking flags. However we want to create exes (hydro, qual, gtm) that have no dependencies on system libraries at runtime. This means we compile all libraries with /MT flags.</p><p>
<span class="jira-issue resolved" data-jira-key="DSM2-174" >
                    <a href="http://msb-jira/browse/DSM2-174?src=confmacro" class="jira-issue-key"><img class="icon"
                                                                                      src="http://msb-jira/secure/viewavatar?size=xsmall&amp;avatarId=10303&amp;avatarType=issuetype"/>DSM2-174</a>
                            -
            <span class="summary">PTM DLL compiling issue</span>
                                                <span class="aui-lozenge aui-lozenge-subtle             aui-lozenge-success
     jira-macro-single-issue-export-pdf">Resolved</span>
                </span>
</p><p>PTM is a dll so we have to override the libraries the compiler and linker search for by default.</p><p>For the standard C/C++ libraries more information at <a href="https://docs.microsoft.com/en-us/cpp/c-runtime-library/crt-library-features?view=vs-2019" class="external-link" rel="nofollow">https://docs.microsoft.com/en-us/cpp/c-runtime-library/crt-library-features?view=vs-2019</a></p><p>For the Intel libraries more information at <a href="https://software.intel.com/en-us/articles/libraries-provided-by-intelr-c-compiler-for-windows-and-intel-parallel-composer" class="external-link" rel="nofollow">https://software.intel.com/en-us/articles/libraries-provided-by-intelr-c-compiler-for-windows-and-intel-parallel-composer</a></p><p>The following libraries are then ignored so that the static versions of the libraries are packaged into the .dll file itself. This increases the size of the DLL but then during runtime there are no other dependencies on any system or intel libraries. In other words, it can stand alone and run.</p><p>The libraries ignored are </p><div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>msvcrt.lib;libmmd.lib; mscvcprt.lib;libucrtd.lib;</pre>
</div></div><p><br/></p><p><br/></p><div class="confluence-information-macro confluence-information-macro-tip"><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If you ever need to see all the libraries being used turn the /VERBOSE feature on the linker options in Visual Studio</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="attachments/87228961/87228960.png" data-image-src="attachments/87228961/87228960.png" data-unresolved-comment-count="0" data-linked-resource-id="87228960" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2019-4-29_12-54-20.png" data-base-url="http://msb-confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="87228961" data-linked-resource-container-version="1"></span></p></div></div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/87228961/87228960.png">image2019-4-29_12-54-20.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 16, 2023 11:05</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
